<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineCadiz - Pel√≠culas y Series</title>
    <meta name="description" content="Plataforma streaming con las mejores pel√≠culas y series">
    <meta name="theme-color" content="#141414">

    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" href="/static/images/icon-192.png">
    <link rel="apple-touch-icon" href="/static/images/icon-192.png">

    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/style.css">

    <!-- Open Graph -->
    <meta property="og:title" content="CineCadiz - Streaming">
    <meta property="og:description" content="Mira pel√≠culas y series online">
</head>
<body>
    <!-- Preloader -->
    <div id="preloader">
        <div class="spinner"></div>
        <div class="logo">üé¨ CINECADIZ</div>
    </div>

    <!-- Navegaci√≥n M√≥vil -->
    <nav class="mobile-nav">
        <a href="#home" class="nav-item active">
            <i class="bi bi-house"></i><span>Inicio</span>
        </a>
        <a href="#movies" class="nav-item" data-type="pelicula">
            <i class="bi bi-film"></i><span>Pel√≠culas</span>
        </a>
        <a href="#series" class="nav-item" data-type="serie">
            <i class="bi bi-tv"></i><span>Series</span>
        </a>
        <a href="#live" class="nav-item" data-type="live">
            <i class="bi bi-broadcast"></i><span>Directo</span>
        </a>
        <a href="#search" class="nav-item" id="mobileSearchBtn">
            <i class="bi bi-search"></i><span>Buscar</span>
        </a>
        <a href="#favorites" class="nav-item" id="mobileFavBtn">
            <i class="bi bi-heart"></i><span>Favoritos</span>
        </a>
    </nav>

    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <div class="logo">üé¨ CINECADIZ</div>
            <nav class="desktop-nav">
                <a href="#home" class="active">Inicio</a>
                <a href="#movies" data-type="pelicula">Pel√≠culas</a>
                <a href="#series" data-type="serie">Series</a>
                <a href="#live" data-type="live">En Directo</a>
                <a href="#genres">G√©neros</a>
                <a href="#novedades">Novedades</a>
            </nav>
        </div>

        <div class="header-right">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Buscar pel√≠culas o series...">
                <button id="searchBtn"><i class="bi bi-search"></i></button>
                <div class="search-results" id="searchResults"></div>
            </div>
            <div class="user-menu">
                <button class="btn-notification">
                    <i class="bi bi-bell"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Contenido Principal -->
    <main class="main-content">
        <!-- Hero -->
        <section class="hero" id="home">
            <div class="hero-slider" id="heroSlider">
                <div class="slide active">
                    <div class="hero-content">
                        <h1 class="hero-title">Cargando...</h1>
                    </div>
                </div>
            </div>
        </section>

        <!-- Continuar viendo (solo si hay historial) -->
        <section class="content-section" id="continueSection" style="display:none">
            <div class="section-header">
                <h2 class="section-title">‚ñ∂Ô∏è Continuar viendo</h2>
                <button class="ver-todas" id="btnClearHistory" style="color:var(--text-muted)">Limpiar historial</button>
            </div>
            <div class="carousel" id="continueCarousel"></div>
        </section>

        <!-- Novedades -->
        <section class="content-section">
            <h2 class="section-title">üî• Tendencias</h2>
            <div class="carousel" id="novedades"></div>
        </section>

        <!-- Novedades 2026 -->
        <section class="content-section" id="novedades2026Section">
            <div class="section-header">
                <h2 class="section-title">üÜï Novedades 2026</h2>
                <a href="#" id="ver2026Link" class="ver-todas">Ver todas ‚Üí</a>
            </div>
            <div class="carousel" id="novedades2026Carousel"></div>
        </section>

        <!-- Pel√≠culas -->
        <section class="content-section" id="peliculas">
            <div class="section-header">
                <h2 class="section-title">üé¨ Pel√≠culas</h2>
                <a href="#movies" data-type="pelicula" class="ver-todas">Ver todas ‚Üí</a>
            </div>
            <div class="carousel" id="peliculasCarousel"></div>
        </section>

        <!-- Series -->
        <section class="content-section" id="series">
            <div class="section-header">
                <h2 class="section-title">üì∫ Series</h2>
                <a href="#movies" data-type="serie" class="ver-todas">Ver todas ‚Üí</a>
            </div>
            <div class="carousel" id="seriesCarousel"></div>
        </section>

        <!-- En Directo -->
        <section class="content-section" id="live">
            <div class="section-header">
                <h2 class="section-title">üì° En Directo</h2>
                <a href="#movies" data-type="live" class="ver-todas">Ver todos ‚Üí</a>
            </div>
            <div class="carousel" id="liveCarousel"></div>
        </section>

        <!-- Favoritos (se muestra al pulsar el nav favoritos) -->
        <section class="content-section" id="favoritesSection" style="display:none">
            <div class="section-header">
                <h2 class="section-title">‚ù§Ô∏è Mis Favoritos</h2>
                <button class="ver-todas" id="btnClearFav" style="color:#e50914">Limpiar todo</button>
            </div>
            <div class="movies-grid" id="favoritesGrid"></div>
            <p class="no-content" id="favoritesEmpty" style="display:none">A√∫n no tienes favoritos. Pulsa ‚ù§Ô∏è en cualquier contenido para guardarlo aqu√≠.</p>
        </section>

        <!-- Grid completo -->
        <section class="content-section" id="movies">
            <div class="section-header">
                <h2 class="section-title" id="gridTitle">üé¨ Todo el contenido</h2>
                <div class="filters">
                    <select id="typeFilter" class="filter-select">
                        <option value="">Todo</option>
                        <option value="pelicula">Pel√≠culas</option>
                        <option value="serie">Series</option>
                        <option value="live">En Directo</option>
                    </select>
                    <select id="yearFilter" class="filter-select">
                        <option value="">Todos los a√±os</option>
                    </select>
                    <select id="genreFilter" class="filter-select">
                        <option value="">Todos los g√©neros</option>
                    </select>
                    <select id="sortFilter" class="filter-select">
                        <option value="recent">M√°s recientes</option>
                        <option value="year_desc">A√±o ‚Üì</option>
                        <option value="year_asc">A√±o ‚Üë</option>
                        <option value="title_asc">A‚ÄìZ</option>
                    </select>
                </div>
            </div>
            <!-- Pills de g√©nero para filtrado r√°pido -->
            <div class="genre-pills-wrap" id="genrePillsWrap" style="display:none">
                <div class="genre-pills" id="genrePills"></div>
            </div>
            <div class="movies-grid" id="moviesGrid"></div>
            <button class="btn-load-more" id="loadMore" style="display:none">Cargar m√°s</button>
        </section>

        <!-- Modal detalles -->
        <div class="modal" id="detailsModal">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <div id="modalBody"></div>
            </div>
        </div>

        <!-- Reproductor -->
        <div class="player" id="player">
            <div class="player-header">
                <img id="playerThumb" class="player-thumb" src="" alt="" style="display:none">
                <span id="playerTitle"></span>
                <span class="player-esc-hint">ESC para cerrar</span>
                <button class="btn-pa btn-pa-fs" id="btnFsPlayer" title="Pantalla completa (F)">
                    <i class="bi bi-fullscreen"></i>
                </button>
                <button class="btn-close-player" title="Cerrar (ESC)">&times; Cerrar</button>
            </div>
            <div class="player-body">
                <video id="videoPlayer" controls playsinline>
                    Tu navegador no soporta video HTML5.
                </video>
            </div>
            <!-- Barra de acciones -->
            <div class="player-footer">
                <div class="player-actions">
                    <button class="btn-pa" id="btnPip" title="Picture in Picture (P)">
                        <i class="bi bi-pip"></i> PiP
                    </button>
                    <button class="btn-pa" id="btnOpenApp" title="Abrir en VLC / Kodi / MPV">
                        <i class="bi bi-collection-play"></i> Abrir en app
                    </button>
                    <button class="btn-pa" id="btnCopyUrl" title="Copiar enlace del stream (C)">
                        <i class="bi bi-clipboard"></i> Copiar enlace
                    </button>
                    <select class="btn-pa" id="speedControl" title="Velocidad">
                        <option value="0.5">0.5√ó</option>
                        <option value="0.75">0.75√ó</option>
                        <option value="1" selected>1√ó Normal</option>
                        <option value="1.25">1.25√ó</option>
                        <option value="1.5">1.5√ó</option>
                        <option value="2">2√ó</option>
                    </select>
                </div>
                <p class="player-keys">
                    <kbd>Espacio</kbd> pausa &nbsp;¬∑&nbsp;
                    <kbd>‚Üê ‚Üí</kbd> ¬±10s &nbsp;¬∑&nbsp;
                    <kbd>‚Üë ‚Üì</kbd> volumen &nbsp;¬∑&nbsp;
                    <kbd>F</kbd> pantalla completa &nbsp;¬∑&nbsp;
                    <kbd>M</kbd> mute &nbsp;¬∑&nbsp;
                    <kbd>P</kbd> PiP
                </p>
            </div>
        </div>

        <!-- Overlay de b√∫squeda m√≥vil -->
        <div class="mobile-search-overlay" id="mobileSearchOverlay">
            <div class="mso-header">
                <input type="text" id="mobileSearchInput" placeholder="Buscar pel√≠culas, series...">
                <button id="btnCloseMobileSearch"><i class="bi bi-x-lg"></i></button>
            </div>
            <div class="mso-results" id="mobileSearchResults"></div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>üé¨ CineCadiz</h3>
                <p>La mejor plataforma para ver pel√≠culas y series online.</p>
            </div>
            <div class="footer-section">
                <h4>Navegaci√≥n</h4>
                <a href="#home">Inicio</a>
                <a href="#movies">Pel√≠culas</a>
                <a href="#series">Series</a>
                <a href="#live">En Directo</a>
            </div>
            <div class="footer-section">
                <h4>Legal</h4>
                <a href="#">T√©rminos</a>
                <a href="#">Privacidad</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 CineCadiz. Solo para uso privado.</p>
        </div>
    </footer>

    <!-- HLS.js: reproducci√≥n de streams .m3u8 en Chrome/Firefox -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.13/dist/hls.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="/static/js/script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .catch(err => console.warn('SW error:', err));
        }
    </script>
</body>
</html>
